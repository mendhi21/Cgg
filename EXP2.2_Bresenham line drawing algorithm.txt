//Bresenham line drawing algorithm
#include<GL/gl.h>
#include<GL/glu.h>
#include<GL/glut.h>
#include<iostream>
using namespace std;
float x1,x2,y1,y2;
int ch;
int sign(int a)
{
        if(a>0)
        {
          return 1;
        }
        else 
         if(a<0)
           {
      return (-1);
        }
        else
          {return 0;
          }
}
void init()
{
        glClearColor(1,1,1,1);
        glColor3f(0,0,0);
        gluOrtho2D(-500,500,-500,500);
}
void display()
{
        float dy,dx,step,x,y,G,s1,s2;
        glClear(GL_COLOR_BUFFER_BIT);
        //glPointSize(5);
        glLineWidth(3);
        dx=abs(x2-x1);
        dy=abs(y2-y1);
        if ((dx)>(dy))
        {
                step=(dx);
        }
        else
        {
                step=(dy);
        }
        s1=sign(x2-x1);
        s2=sign(y2-y1);
        G=(2*dy)-dx;
        x=x1;
        y=y1;
        glBegin(GL_POINTS);
        glVertex2i(x,y);
        glEnd();
        switch(ch)
        {
                int i;
                case 1: for(i=1;i<=step;i++)
                        {
                                while(G>=0)
                                {
                                y=y+s2;
                                G=G-(2*dx);
                                }
                                x=x+s1;
                                G=G+(2*dy);
                                if(i%16<=8)
                                {
                                        glBegin(GL_POINTS);
                                        glVertex2i(x,y);
                                        glEnd();
                                }
                        }
                        break;
                 case 2: for(i=1;i<=step;i++)
                        {        while(G>=0)
                                {
                                y=y+s2;
                                G=G-(2*dx);
                                }
                                x=x+s1;
                                G=G+(2*dy);
                                if(i%8==0)
                                {
                                        glBegin(GL_POINTS);
                                        glVertex2i(x,y);
                                        glEnd();
                                }
                        }
                        break;       
                  case 3: for(i=1;i<=step;i++)
                          {
                            while(G>=0)
                                {
                                y=y+s2;
                                G=G-(2*dx);
                                }
                                x=x+s1;
                                G=G+(2*dy);
                           if(i%16<=4)
                            {
                                        glBegin(GL_POINTS);
                                        glVertex2i(x,y);
                                        glEnd();
                            }
                            if(i%8==2)
                                {
                                        glBegin(GL_POINTS);
                                        glVertex2i(x,y);
                                        glEnd();
                                }
                             }
                             break;
                                
                    case 4:  
                             glBegin(GL_LINES);
                             glVertex2i(x1,y1);
                             glVertex2i(x2,y2);
                             glEnd();
                             break;         
        }
        glBegin(GL_LINES);
        glVertex2i(-500,0);
        glVertex2i(500,0);
        glVertex2i(0,-500);
        glVertex2i(0,500);
        glEnd();
        glFlush();
}
int main(int argc,char **argv)
{
        cout<<"Enter X1 and Y1"<<endl;
        cin>>x1>>y1;
        cout<<"Enter X2 and Y2"<<endl;
        cin>>x2>>y2;      
        cout<<"1.Dashed 2.Dotted 3.Center 4.Simple"<<endl;
        cout<<"Enter your choice:"<<endl;
        cin>>ch;
        glutInit(&argc,argv);
        glutInitDisplayMode(GLUT_RGB | GLUT_SINGLE);
        glutInitWindowPosition(0,0);
        glutInitWindowSize(500,500);
        glutCreateWindow("DDA Line");
        init();
        glutDisplayFunc(display);
        glutMainLoop();
        return 0;
}
